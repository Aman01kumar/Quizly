import{R as t,u as L,a as D,r as c}from"./index-BWa8LPfA.js";import{Q}from"./QuestionCard-D2xl0k4x.js";function S(r){if(!Array.isArray(r))return[];const e=[...r];for(let a=e.length-1;a>0;a--){const n=Math.floor(Math.random()*(a+1));[e[a],e[n]]=[e[n],e[a]]}return e}function b(r){if(typeof r!="string")return"";try{return new DOMParser().parseFromString(r,"text/html").documentElement.textContent||""}catch{const e=document.createElement("textarea");return e.innerHTML=r,e.value}}function B(r){return Array.isArray(r)?r.map((e,a)=>{const n=b((e==null?void 0:e.correct_answer)||""),i=Array.isArray(e==null?void 0:e.incorrect_answers)?e.incorrect_answers.map(b):[],o=S([n,...i]),d=o.findIndex(l=>l===n);return{id:`${(e==null?void 0:e.category)||"General"}-${(e==null?void 0:e.difficulty)||"easy"}-${a}-${Math.random().toString(36).slice(2,9)}`,question:b((e==null?void 0:e.question)||"Untitled Question"),options:o.length?o:["N/A"],correctIndex:d>=0?d:0,difficulty:(e==null?void 0:e.difficulty)||"easy",category:(e==null?void 0:e.category)||"General"}}):[]}const J=[{id:"l1",question:"Which language runs in a web browser?",options:["Java","C","Python","JavaScript"],correctIndex:3,difficulty:"easy",category:"Technology"},{id:"l2",question:"What is the capital of France?",options:["Berlin","Madrid","Paris","Lisbon"],correctIndex:2,difficulty:"easy",category:"Geography"},{id:"l3",question:"Who painted the Mona Lisa?",options:["Van Gogh","Da Vinci","Picasso","Rembrandt"],correctIndex:1,difficulty:"easy",category:"Art"},{id:"l4",question:"What does HTTP stand for?",options:["HyperText Transfer Protocol","HighText Transfer Protocol","HyperText Transmission Package","Hyper Transfer Text Process"],correctIndex:0,difficulty:"medium",category:"Technology"},{id:"l5",question:"Which planet is known as the Red Planet?",options:["Earth","Mars","Jupiter","Venus"],correctIndex:1,difficulty:"easy",category:"Space"},{id:"l6",question:"Which data structure uses FIFO order?",options:["Stack","Queue","Tree","Graph"],correctIndex:1,difficulty:"medium",category:"Computer Science"},{id:"l7",question:"In which year did World War II end?",options:["1942","1945","1948","1950"],correctIndex:1,difficulty:"medium",category:"History"},{id:"l8",question:"Which is the largest mammal in the world?",options:["African Elephant","Blue Whale","Giraffe","Hippopotamus"],correctIndex:1,difficulty:"easy",category:"Biology"},{id:"l9",question:"Who wrote 'Romeo and Juliet'?",options:["William Shakespeare","Charles Dickens","Leo Tolstoy","Mark Twain"],correctIndex:0,difficulty:"easy",category:"Literature"},{id:"l10",question:"What is the boiling point of water at sea level?",options:["90¬∞C","100¬∞C","110¬∞C","120¬∞C"],correctIndex:1,difficulty:"easy",category:"Science"},{id:"l11",question:"Which gas do humans exhale when breathing?",options:["Oxygen","Carbon Dioxide","Nitrogen","Helium"],correctIndex:1,difficulty:"easy",category:"Biology"},{id:"l12",question:"What is the currency of Japan?",options:["Won","Dollar","Yen","Yuan"],correctIndex:2,difficulty:"easy",category:"Economics"},{id:"l13",question:"Which element has the chemical symbol 'O'?",options:["Gold","Oxygen","Osmium","Opal"],correctIndex:1,difficulty:"easy",category:"Chemistry"},{id:"l14",question:"Which continent is the Sahara Desert located in?",options:["Asia","Africa","Australia","South America"],correctIndex:1,difficulty:"easy",category:"Geography"},{id:"l15",question:"Who is known as the 'Father of Computers'?",options:["Alan Turing","Charles Babbage","John von Neumann","Bill Gates"],correctIndex:1,difficulty:"medium",category:"Technology"},{id:"l16",question:"How many players are there in a cricket team?",options:["9","10","11","12"],correctIndex:2,difficulty:"easy",category:"Sports"},{id:"l17",question:"What is the smallest prime number?",options:["0","1","2","3"],correctIndex:2,difficulty:"easy",category:"Mathematics"},{id:"l18",question:"Which ocean is the largest?",options:["Atlantic Ocean","Indian Ocean","Pacific Ocean","Arctic Ocean"],correctIndex:2,difficulty:"easy",category:"Geography"},{id:"l19",question:"Who discovered gravity?",options:["Albert Einstein","Isaac Newton","Galileo Galilei","Nikola Tesla"],correctIndex:1,difficulty:"easy",category:"Science"},{id:"l20",question:"Which programming language is used for Android app development?",options:["Python","Kotlin","Swift","Ruby"],correctIndex:1,difficulty:"medium",category:"Technology"}];async function $(r=10,e="easy"){var n;const a=`https://opentdb.com/api.php?amount=${r}&difficulty=${e}&type=multiple`;try{const i=await fetch(a);if(!i.ok)throw new Error(`API request failed (status ${i.status})`);const o=await i.json();if(!((n=o==null?void 0:o.results)!=null&&n.length))throw new Error("No questions returned from API");return B(o.results).slice(0,r)}catch(i){console.warn("‚ö†Ô∏è Falling back to local questions:",i.message);const o=J.filter(d=>d.difficulty===e);return S(o).slice(0,r)}}const N="quizly_highscores_v1";function j(){try{const r=localStorage.getItem(N),e=JSON.parse(r);return Array.isArray(e)?e:[]}catch{return[]}}function F(r){if(!r||typeof r.percent!="number")return;const e=j();e.push({...r,date:r.date||new Date().toISOString()}),e.sort((a,n)=>n.percent!==a.percent?n.percent-a.percent:new Date(n.date)-new Date(a.date)),localStorage.setItem(N,JSON.stringify(e.slice(0,10)))}function R({value:r}){return t.createElement("div",{className:"h-3 w-full bg-gray-200 rounded-full overflow-hidden shadow-inner",role:"progressbar","aria-valuenow":r,"aria-valuemin":"0","aria-valuemax":"100"},t.createElement("div",{style:{width:`${r}%`},className:"h-full rounded-full bg-gradient-to-r from-indigo-500 via-purple-500 to-teal-400 shadow-md transition-all duration-500 ease-out progress-animate"}))}function Y(){const r=L(),{state:e}=D(),a=(e==null?void 0:e.amount)??10,[n,i]=c.useState([]),[o,d]=c.useState(0),[l,g]=c.useState([]),[h,y]=c.useState(30),[C,w]=c.useState(!0),[T,p]=c.useState(!1);c.useEffect(()=>{(async()=>{try{w(!0);const s=await $(a);i(s),g(Array(s.length).fill(null))}catch(s){console.error("‚ùå Failed to load questions",s),i([]),g([])}finally{w(!1)}})()},[a]),c.useEffect(()=>{if(!n.length)return;if(h<=0){v(!0);return}const s=setTimeout(()=>y(u=>u-1),1e3);return()=>clearTimeout(s)},[h,n.length]);const A=s=>{g(u=>{const m=[...u];return m[o]=s,m})},W=()=>{o>0&&(d(s=>s-1),y(30))},v=(s=!1)=>{!s&&l[o]===null||(o<n.length-1?(d(u=>u+1),y(30)):p(!0))},k=()=>{localStorage.setItem("quiz-progress",JSON.stringify({current:o,selections:l})),alert("‚úÖ Progress saved! You can resume later.")},P=()=>{const s=n.map((f,M)=>{const E=l[M],G=E===f.correctIndex;return{...f,selectedIndex:E,isCorrect:G}}),u=s.filter(f=>f.isCorrect).length,m={correct:u,total:n.length,percent:Math.round(u/n.length*100),questions:n,answers:l,detail:s,date:new Date().toISOString()};F(m),r("/results",{state:m})},I=l.filter(s=>s===null).length,O=c.useMemo(()=>n.length?(o+1)/n.length*100:0,[o,n.length]);if(C)return t.createElement("div",{className:"flex items-center justify-center min-h-screen text-lg text-gray-700"},"‚è≥ Loading questions...");if(!n.length)return t.createElement("div",{className:"flex flex-col items-center justify-center min-h-screen text-center"},t.createElement("h2",{className:"text-xl font-semibold"},"No questions available"),t.createElement("p",{className:"mt-2 text-gray-600"},"Try again later."),t.createElement("button",{onClick:()=>r("/"),className:"mt-4 rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700"},"‚üµ Back Home"));const H=n[o],x=l[o];return t.createElement("div",{className:"min-h-screen p-6 sm:p-10 bg-gradient-to-br from-indigo-500 via-purple-400 to-cyan-400"},t.createElement("div",{className:"max-w-3xl mx-auto grid gap-6"},t.createElement("div",{className:"rounded-xl bg-white p-4 shadow"},t.createElement(R,{value:O}),t.createElement("div",{className:"mt-2 flex justify-between text-sm text-gray-600"},t.createElement("span",null,"Question ",o+1," / ",n.length),t.createElement("span",null,"‚è± ",h,"s"))),t.createElement(Q,{question:H,selectedIndex:x,locked:!1,onSelect:A}),t.createElement("div",{className:"flex justify-between gap-3"},t.createElement("button",{onClick:W,disabled:o===0,className:"rounded bg-gray-600 px-4 py-2 text-white hover:bg-gray-700 disabled:opacity-50"},"‚üµ Previous"),t.createElement("button",{onClick:k,className:"rounded bg-blue-600 px-6 py-2 text-white hover:bg-blue-700"},"üíæ Save"),o<n.length-1?t.createElement("button",{onClick:()=>v(!1),disabled:x===null,className:`rounded px-6 py-2 text-white ${x===null?"bg-gray-400 cursor-not-allowed":"bg-orange-600 hover:bg-orange-700"}`},"Next ‚ü∂"):t.createElement("button",{onClick:()=>p(!0),className:"rounded bg-green-600 px-6 py-2 text-white hover:bg-green-700"},"Finish ‚úÖ"))),T&&t.createElement("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50"},t.createElement("div",{className:"bg-gradient-to-br from-purple-600 via-indigo-600 to-blue-600 text-white rounded-2xl shadow-2xl p-8 max-w-md w-full transform transition-all scale-100 hover:scale-[1.02]"},t.createElement("h2",{className:"text-2xl font-bold mb-4"},"Submit Quiz?"),t.createElement("p",{className:"mb-6 text-lg"},"You still have"," ",t.createElement("span",{className:"font-semibold text-yellow-300"},I)," ","unanswered question",I!==1?"s":"","."),t.createElement("div",{className:"flex justify-center gap-6"},t.createElement("button",{onClick:()=>p(!1),className:"rounded-lg bg-gray-800 px-5 py-2 text-white font-semibold shadow hover:bg-gray-900 transition"},"‚üµ Return"),t.createElement("button",{onClick:P,className:"rounded-lg bg-green-500 px-6 py-2 text-white font-semibold shadow hover:bg-green-600 transition"},"‚úÖ Submit")))))}export{Y as default};
